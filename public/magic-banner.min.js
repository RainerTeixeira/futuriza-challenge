!function(){"use strict";var e="magic-banner-container",t="magic-banner-closed";function n(e){var t=document.createElement("div");return t.textContent=e,t.innerHTML}function r(r){if(!function(e){try{return localStorage.getItem(t)===e}catch(e){return!1}}(r.id)){var o=document.createElement("div");o.id=e,o.style.cssText="position:fixed;top:0;left:0;right:0;z-index:999999;background:#fff;box-shadow:0 2px 8px rgba(0,0,0,0.15);opacity:0;transition:opacity 0.3s;";var i=document.createElement("button");i.innerHTML="&times;",i.style.cssText="position:absolute;top:8px;right:8px;background:rgba(0,0,0,0.5);color:#fff;border:none;border-radius:50%;width:28px;height:28px;font-size:20px;line-height:1;cursor:pointer;z-index:1;",i.onclick=function(){!function(e){try{localStorage.setItem(t,e)}catch(e){}}(r.id),function(){var t=document.getElementById(e);t&&(t.style.opacity="0",setTimeout(function(){t.parentNode&&t.parentNode.removeChild(t)},300))}()};var c=document.createElement("a");if(c.href=n(r.url),c.target="_blank",c.rel="noopener noreferrer",c.style.cssText="display:block;text-decoration:none;",r.image_url){var a=document.createElement("img");a.src=n(r.image_url),a.alt="Banner",a.style.cssText="width:100%;height:auto;display:block;",c.appendChild(a)}else{var d=document.createElement("div");d.textContent=r.url,d.style.cssText="padding:16px;color:#333;",c.appendChild(d)}o.appendChild(i),o.appendChild(c);var u=document.body,s=document.currentScript||document.querySelector('script[src*="magic-banner.js"]'),l=s&&s.getAttribute("data-target");if(l){var p=document.querySelector(l);p&&(u=p)}u.insertBefore(o,u.firstChild),setTimeout(function(){o.style.opacity="1"},10);var m=parseInt(window.getComputedStyle(document.body).paddingTop)||0;document.body.style.paddingTop=m+o.offsetHeight+"px"}}function o(){var e,t=(e=document.currentScript||document.querySelector('script[src*="magic-banner.js"]'))&&e.getAttribute("data-url")||window.location.href,n=function(){var e=document.currentScript||document.querySelector('script[src*="magic-banner.js"]');return e&&e.getAttribute("data-api")||"http://localhost:3000"}(),o=n+"/api/banners?url="+encodeURIComponent(t);fetch(o).then(function(e){if(!e.ok){if(404===e.status)return null;throw new Error("Network response was not ok")}return e.json()}).then(function(e){e&&r(e)}).catch(function(e){console.warn("Magic Banner: Failed to load banner",e)})}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",o):o()}();